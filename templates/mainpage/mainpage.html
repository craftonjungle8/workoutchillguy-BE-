<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width">
    <title>메인 페이지</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- FontAwesome CSS -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
</head>
<body class="flex flex-col items-center min-h-screen bg-gray-100">
    <!-- 상단 바 -->
    <div class="w-[1017px] h-[94px] bg-white p-4 flex justify-between items-center border-b border-gray-300">
        <div class="text-3xl font-bold text-gray-800">오운완</div>
        <div class="flex space-x-6 text-sm text-gray-800">
            <a href="/board" class="text-gray-800 hover:text-[#38773E] transition duration-300">메이트찾기</a>
            <a href="/mypage" class="text-gray-800 hover:text-[#38773E] transition duration-300">마이페이지</a>
            <a href="/logout" class="text-gray-800 hover:text-[#38773E] transition duration-300">로그아웃</a>
        </div>
    </div>

    <!-- 메인 컨텐츠 -->
    <div class="container mx-auto p-4 w-[1017px]">
        <h1 class="text-xl font-bold mb-4">안녕하세요, {{ nickname }} ({{ email }}) 님!</h1>

        <!-- 달력 / 출석률 / 웍스아웃 그래프 등 -->
        <div class="grid grid-cols-2 gap-4 h-screen">
            <!-- 왼쪽: 달력 -->
            <div class="bg-white p-4 shadow rounded-lg flex-col h-3/5">
                <h2 class="text-lg font-semibold mb-2 text-center">
                    {{ nickname }}님의 오운완 캘린더 ({{ year }}년 {{ month }}월)
                </h2>

                <div id="calendar" class="grid grid-cols-7 gap-1 text-center flex-grow">
                    <!-- 요일 헤더 (월~일) -->
                    <div class="font-bold">Mon</div>
                    <div class="font-bold">Tue</div>
                    <div class="font-bold">Wed</div>
                    <div class="font-bold">Thu</div>
                    <div class="font-bold">Fri</div>
                    <div class="font-bold">Sat</div>
                    <div class="font-bold">Sun</div>

                    <!-- 날짜들 -->
                    {% for day_info in calendar_data %}
                    {% if day_info.day is none %}
                        <!-- 달력 공백 -->
                        <div class="py-2"></div>
                    {% else %}
                        <div class="
                            py-2 rounded 
                            {% if day_info.status == 'no_records' %}
                                bg-white
                            {% elif day_info.status == 'all_checked' %}
                                bg-green-200
                            {% else %}
                                bg-red-200
                            {% endif %}
                        ">
                            <a href="{{ url_for('diary_page', date_str=day_info.date_str) }}">
                                {{ day_info.day }}
                            </a>
                        </div>
                    {% endif %}
                    {% endfor %}
                </div>
            </div>

            <!-- 오른쪽: 출석률 / 웍스아웃 차트 (예시) -->
            <div class="flex flex-col gap-4 items-center">
                <!-- 출석률 원 그래프 -->
                <div class="bg-white p-4 shadow rounded-lg flex-col items-center">
                    <h2 class="text-lg font-semibold mb-2">이달의 출석률</h2>
                    <canvas id="attendanceChart" class="w-56 h-56"></canvas>
                </div>
                <!-- 웍스아웃 막대 그래프 -->
                <div class="bg-white p-4 shadow rounded-lg items-center">
                    <h2 class="text-lg font-semibold mb-2">TOP 웍스아웃</h2>
                    <canvas id="workoutChart" class="w-100"></canvas>
                </div>
            </div>
        </div>
    </div>

    <!-- 하단 고정 박스 -->
    <div class="w-full h-[50px] bg-[#38773E] flex justify-between items-center px-10 fixed bottom-0 left-0">
        <!-- 오운완 아이콘 -->
        <div class="text-white text-xl font-bold flex items-center space-x-2">
            <i class="fas fa-dumbbell"></i>
            <span>오운완</span>
        </div>
        <!-- 노션/깃허브 아이콘 -->
        <div class="flex items-center space-x-6">
            <a href="https://www.notion.so" target="_blank">
                <img src="../../static/images/notion_logo.png" alt="Notion" class="w-8 h-8 cursor-pointer">
            </a>
            <a href="https://github.com/craftonjungle8" target="_blank">
                <img src="../../static/images/Github_logo.png" alt="Github" class="w-8 h-8 cursor-pointer">
            </a>
        </div>
    </div>

    <!-- 차트 초기화 스크립트 (예시) -->
    <script>
        const attendanceCtx = document.getElementById('attendanceChart').getContext('2d');
        new Chart(attendanceCtx, {
            type: 'pie',
            data: {
                labels: ['출석', '결석'],
                datasets: [{
                    data: [10, 20],
                    backgroundColor: ['green', 'red'],
                }]
            },
            options: {
                responsive: false,
                maintainAspectRatio: false
            }
        });

        const workoutCtx = document.getElementById('workoutChart').getContext('2d');
        new Chart(workoutCtx, {
            type: 'bar',
            data: {
                labels: ['데드리프트', '스쿼트', '벤치프레스', '레그프레스'],
                datasets: [{
                    data: [10, 8, 5, 3],
                    backgroundColor: ['#fbbf24', '#38bdf8', '#a78bfa', '#facc15'],
                }]
            },
            options: {
                responsive: false,
                maintainAspectRatio: false
            }
        });
    </script>
</body>
</html>
